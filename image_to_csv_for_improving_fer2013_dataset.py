# -*- coding: utf-8 -*-
"""Untitled5.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1l03KGcDueZXkrHg9HtAYBCJY5rDqKp2m
"""

from google.colab import drive
drive.mount('/content/gdrive')

root = '/content/gdrive/My Drive/imagedosyalari/'
root1 = '/content/gdrive/My Drive/cnn-duygu-tanima/images'
root2 = '/content/gdrive/My Drive/cnn-duygu-tanima/images/datasetimages1/'

import PIL
print('Pillow Version:', PIL.__version__)

# load and show an image with Pillow
from PIL import Image
from matplotlib import pyplot
# Open the image form working directory
image = Image.open(root2 + '1.JPG')
# summarize some details about the image
print(image.format)
print(image.size)
print(image.mode)
# show the image

pyplot.imshow(image)
pyplot.show()

from PIL import Image
import numpy as np
import sys
import os
import csv

#Useful function
def createFileList(myDir, format='6.JPG'):
  fileList = []
  print(myDir)
  for root, dirs, files in os.walk(myDir, topdown=False):
      for name in files:
          if name.endswith(format):
              fullName = os.path.join(root, name)
              fileList.append(fullName)
  return fileList

# load the original image
myFileList = createFileList(root2)

for file in myFileList:
    print(file)
    img_file = Image.open(file)
    # img_file.show()

    # get original image parameters...
    width, height = img_file.size
    format = img_file.format
    mode = img_file.mode
    print(width)
    print(height)
    # Make image Greyscale
    img_grey = img_file.convert('L')
    #img_grey.save('result.png')
    #img_grey.show()

    # Save Greyscale values
    value = np.asarray(img_grey.getdata(), dtype=np.int).reshape((img_grey.size[1], img_grey.size[0]))
    
    value = value.flatten()
    print(value)
    with open(root2 + "img_pixels2.csv", 'a') as f:
        writer = csv.writer(f)
        writer.writerow(value)